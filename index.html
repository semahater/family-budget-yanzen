<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#B8D4E3">
    <title>–°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç –Ø–Ω—Ü–µ–Ω</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <!-- –ì–õ–ê–í–ù–ê–Ø -->
        <div id="screen-home" class="screen active">
            <div class="header"><h1>üí∞ –°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç –Ø–Ω—Ü–µ–Ω</h1><div id="syncStatus" class="sync-status">‚úÖ –û–Ω–ª–∞–π–Ω</div></div>
            <div class="month-selector">
                <button class="month-btn" onclick="prevMonth()">‚Üê</button>
                <span id="currentMonthName">–ù–æ—è–±—Ä—å 2025</span>
                <button class="month-btn" onclick="nextMonth()">‚Üí</button>
                <button class="month-btn" onclick="openAddMonthModal()">+</button>
            </div>
            <div class="balance-card">
                <div class="balance-item"><div class="balance-label">–î–æ—Ö–æ–¥</div><div class="balance-value" id="totalIncome">0 ‚ÇΩ</div></div>
                <div class="balance-item"><div class="balance-label">–†–∞—Å—Ö–æ–¥—ã</div><div class="balance-value" id="totalExpense">0 ‚ÇΩ</div></div>
                <div class="balance-item"><div class="balance-label">–ë–∞–ª–∞–Ω—Å</div><div class="balance-value" id="totalBalance">0 ‚ÇΩ</div></div>
            </div>
            <div class="chart-container"><canvas id="expenseChart"></canvas><div id="chartPlaceholder">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div></div>
            <div class="recent-transactions"><h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ</h3><div id="recentList"></div></div>
            <button class="fab" onclick="openAddModal('expense')">‚ûï –†–∞—Å—Ö–æ–¥</button>
            <button class="fab fab-income" onclick="openAddModal('income')">üíµ –î–æ—Ö–æ–¥</button>
        </div>

        <!-- –†–ê–°–•–û–î–´ -->
        <div id="screen-expenses" class="screen">
            <div class="header"><h1>üìä –†–∞—Å—Ö–æ–¥—ã</h1><div id="syncStatus2" class="sync-status">‚úÖ –û–Ω–ª–∞–π–Ω</div></div>
            <div class="month-selector"><button class="month-btn" onclick="prevMonth()">‚Üê</button><span id="currentMonthName2">–ù–æ—è–±—Ä—å 2025</span><button class="month-btn" onclick="nextMonth()">‚Üí</button></div>
            <input type="text" id="searchInput" class="search-input" placeholder="–ü–æ–∏—Å–∫...">
            <div class="filter-tabs"><button class="filter-tab active" onclick="filterByCategory('all')">–í—Å–µ</button><div id="categoryFilters"></div></div>
            <select id="sortSelect" class="sort-select" onchange="renderExpensesList()">
                <option value="date-desc">–ü–æ –¥–∞—Ç–µ (—Å–≤–µ–∂–∏–µ)</option>
                <option value="date-asc">–ü–æ –¥–∞—Ç–µ (—Å—Ç–∞—Ä—ã–µ)</option>
                <option value="amount-desc">–ü–æ —Å—É–º–º–µ (–±–æ–ª—å—à–µ)</option>
                <option value="amount-asc">–ü–æ —Å—É–º–º–µ (–º–µ–Ω—å—à–µ)</option>
            </select>
            <div id="expensesList"></div>
            <button class="fab" onclick="openAddModal('expense')">‚ûï –†–∞—Å—Ö–æ–¥</button>
        </div>

        <!-- –ü–õ–ê–ù -->
        <div id="screen-plan" class="screen">
            <div class="header"><h1>üí∞ –ü–ª–∞–Ω</h1><div id="syncStatus3" class="sync-status">‚úÖ –û–Ω–ª–∞–π–Ω</div></div>
            <div class="month-selector"><button class="month-btn" onclick="prevMonth()">‚Üê</button><span id="currentMonthName3">–ù–æ—è–±—Ä—å 2025</span><button class="month-btn" onclick="nextMonth()">‚Üí</button></div>
            <div id="budgetList"></div>
        </div>

        <!-- –ù–ê–°–¢–†–û–ô–ö–ò -->
        <div id="screen-settings" class="screen">
            <div class="header"><h1>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1></div>
            <div class="settings-section">
                <h3>–ü—Ä–æ—Ñ–∏–ª–∏</h3>
                <div class="profile-item"><span>üë® –°–µ–º—ë–Ω</span><span>‚úîÔ∏è</span></div>
                <div class="profile-item"><span>üë© –¢–∞—Ç—å—è–Ω–∞</span><span>‚úîÔ∏è</span></div>
            </div>
            <div class="settings-section">
                <h3>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                <div id="syncStatusText">–°—Ç–∞—Ç—É—Å: ‚úÖ –û–Ω–ª–∞–π–Ω</div>
                <div id="lastSyncTime">–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä: –Ω–∏–∫–æ–≥–¥–∞</div>
                <button class="btn-primary" onclick="manualSync()">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            <div class="settings-section">
                <h3>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
                <div>–í–µ—Ä—Å–∏—è: 2.1</div>
                <div>–î–∞—Ç–∞: 31 –æ–∫—Ç—è–±—Ä—è 2025</div>
                <button class="btn-danger" onclick="clearCache()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à</button>
            </div>
        </div>

        <!-- BOTTOM NAV -->
        <div class="bottom-nav">
            <button class="nav-btn active" onclick="switchScreen('home')">üè†</button>
            <button class="nav-btn" onclick="switchScreen('expenses')">üìä</button>
            <button class="nav-btn" onclick="switchScreen('plan')">üí∞</button>
            <button class="nav-btn" onclick="switchScreen('settings')">‚öôÔ∏è</button>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ò -->
    <div id="modalOverlay" class="modal-overlay">
        <div id="transactionModal" class="modal">
            <h2 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h2>
            <input type="text" id="txName" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
            <input type="number" id="txAmount" placeholder="–°—É–º–º–∞" min="0">
            <select id="txCategory"></select>
            <input type="date" id="txDate">
            <button class="btn-danger" id="txDeleteBtn" style="display:none;" onclick="deleteTransaction()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            <button class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            <button class="btn-primary" onclick="saveTransaction()">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>

        <div id="incomeModal" class="modal">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥</h2>
            <input type="text" id="incName" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
            <input type="number" id="incAmount" placeholder="–°—É–º–º–∞" min="0">
            <input type="date" id="incDate">
            <button class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            <button class="btn-primary" onclick="saveIncome()">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>

        <div id="limitModal" class="modal">
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–∏–º–∏—Ç</h2>
            <label id="limitCategoryLabel"></label>
            <input type="number" id="limitAmount" placeholder="0" min="0">
            <button class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            <button class="btn-primary" onclick="saveLimit()">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>

        <div id="monthModal" class="modal">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –º–µ—Å—è—Ü</h2>
            <select id="monthSelect"></select>
            <button class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            <button class="btn-primary" onclick="addNewMonth()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/sheets-sync.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
